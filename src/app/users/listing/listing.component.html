<p-table [value]="products" dataKey="id" editMode="row" [tableStyle]="{'min-width': '50rem'}">
  <ng-template #header>
      <tr>
          <th style="width:20%">Code</th>
          <th style="width:20%">Name</th>
          <th style="width:20%">Inventory Status</th>
          <th style="width:20%">Price</th>
          <th style="width:20%"></th>
      </tr>
  </ng-template>
  @for (product of products; track product.id; let ri = $index) {
    <tr [pEditableRow]="product">
      <td>
        <p-cellEditor>
          <ng-template #input>
            <input pInputText type="text" [(ngModel)]="product.code" />
          </ng-template>
          <ng-template #output>
            {{product.code}}
          </ng-template>
        </p-cellEditor>
      </td>
      <td>
        <p-cellEditor>
          <ng-template #input>
            <input pInputText type="text" [(ngModel)]="product.name" required />
          </ng-template>
          <ng-template #output>
            {{product.name}}
          </ng-template>
        </p-cellEditor>
      </td>
      <td>
        <p-cellEditor>
          <ng-template #input>
            <p-select [options]="statuses" appendTo="body" [(ngModel)]="product.inventoryStatus" [style]="{'width':'100%'}" />
          </ng-template>
          <ng-template #output>
            <p-tag [value]="product.inventoryStatus" [severity]="getSeverity(product.inventoryStatus)" />
          </ng-template>
        </p-cellEditor>
      </td>
      <td>
        <p-cellEditor>
          <ng-template #input>
            <input pInputText type="text" [(ngModel)]="product.price" />
          </ng-template>
          <ng-template #output>
            {{product.price | currency: 'USD'}}
          </ng-template>
        </p-cellEditor>
      </td>
      <td>
        <div class="flex items-center justify-center gap-2">
          @if (!product.editing) {
            <button
              pButton
              pRipple
              type="button"
              pInitEditableRow
              icon="pi pi-pencil"
              (click)="onRowEditInit(product)"
              text
              rounded
              severity="secondary"
            ></button>
          }
          @if (product.editing) {
            <button
              pButton
              pRipple
              type="button"
              pSaveEditableRow
              icon="pi pi-check"
              (click)="onRowEditSave(product)"
              text
              rounded
              severity="secondary"
            ></button>
            <button
              pButton
              pRipple
              type="button"
              pCancelEditableRow
              icon="pi pi-times"
              (click)="onRowEditCancel(product, ri)"
              text
              rounded
              severity="secondary"
            ></button>
          }
        </div>
      </td>
    </tr>
  }
</p-table>
